{"version":3,"sources":["redux/auth/selectors.js","redux/auth/operations.js","redux/contacts/contacts-slice.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","images/defaultAvatar.png","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/auth/slice.js","redux/store.js","index.js"],"names":["getIsLoggedIn","state","auth","isLoggedIn","getUserName","user","name","getUserEmail","email","authSelectors","getIsFetchingCurrentUser","isFethingCurrentUser","axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","thunkAPI","a","post","data","toast","error","rejectWithValue","message","logIn","logOut","fetchCurrentUser","_","getState","persistedToken","get","console","log","phonebookApi","createApi","reducerPath","baseQuery","baseUrl","url","method","result","err","status","response","axiosBaseQuery","tagTypes","refetchOnMountOrArgChange","refetchOnReconnect","endpoints","build","fetchContacts","query","providesTags","addContact","mutation","newContact","invalidatesTags","deleteContact","contactID","useFetchContactsQuery","useAddContactMutation","useDeleteContactMutation","useChangeContactMutation","Navigation","useSelector","className","exact","to","activeClassName","AuthNav","dispatch","useDispatch","src","alt","width","type","onClick","authOperations","AppBar","PrivateRoute","children","routeProps","PiblicRoute","restricted","redirectTo","shouldRedirect","HomeView","lazy","RegisterView","LoginView","PhonebookView","App","useEffect","fallback","path","from","authSlice","createSlice","require","initialState","extraReducers","fulfilled","payload","pending","rejected","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.4e00e76e.chunk.js","sourcesContent":["export const getIsLoggedIn = (state) => state.auth.isLoggedIn;\r\nexport const getUserName = (state) => state.auth.user.name;\r\nexport const getUserEmail = (state) => state.auth.user.email;\r\nexport const getIsFetchingCurrentUser = (state) =>\r\n  state.auth.isFethingCurrentUser;\r\n\r\nexport const authSelectors = {\r\n  getIsLoggedIn,\r\n  getUserName,\r\n  getUserEmail,\r\n  getIsFetchingCurrentUser,\r\n};\r\n","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-hot-toast';\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const register = createAsyncThunk(\r\n  'auth/register',\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/signup', credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      toast.error(\r\n        'The User with this email has already registered. Please, login or sign up with another email'\r\n      );\r\n      return thunkAPI.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const logIn = createAsyncThunk(\r\n  '/auth/login',\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const { data } = await axios.post('/users/login', credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      toast.error('User with this email or password is not found!');\r\n      return thunkAPI.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const logOut = createAsyncThunk('/auth/logout', async (thunkAPI) => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.message);\r\n  }\r\n});\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n  '/auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n      console.log('There is any token');\r\n    }\r\n  }\r\n);\r\n","import { createApi } from '@reduxjs/toolkit/query/react';\r\nimport axios from 'axios';\r\n\r\n//I got this solution from redux-toolkit documentation example \"Customizing queries with baseQuery​\"\r\nconst axiosBaseQuery =\r\n  ({ baseUrl } = { baseUrl: '' }) =>\r\n  async ({ url, method, data }) => {\r\n    try {\r\n      const result = await axios({ url: baseUrl + url, method, data });\r\n      return { data: result.data };\r\n    } catch (axiosError) {\r\n      let err = axiosError;\r\n      return {\r\n        error: { status: err.response?.status, data: err.response?.data },\r\n      };\r\n    }\r\n  };\r\n\r\nexport const phonebookApi = createApi({\r\n  reducerPath: 'phonebookApi',\r\n  baseQuery: axiosBaseQuery({\r\n    baseUrl: 'https://connections-api.herokuapp.com',\r\n  }),\r\n  tagTypes: ['Contact'],\r\n  refetchOnMountOrArgChange: true,\r\n  refetchOnReconnect: true,\r\n\r\n  endpoints(build) {\r\n    return {\r\n      fetchContacts: build.query({\r\n        query: () => ({\r\n          url: '/contacts',\r\n          method: 'GET',\r\n        }),\r\n        providesTags: ['Contact'],\r\n      }),\r\n\r\n      addContact: build.mutation({\r\n        query: (newContact) => ({\r\n          url: '/contacts',\r\n          method: 'POST',\r\n          data: newContact,\r\n        }),\r\n        invalidatesTags: ['Contact'],\r\n      }),\r\n\r\n      deleteContact: build.mutation({\r\n        query: (contactID) => ({\r\n          url: `/contacts/${contactID}`,\r\n          method: 'DELETE',\r\n        }),\r\n        invalidatesTags: ['Contact'],\r\n      }),\r\n    };\r\n  },\r\n});\r\n\r\nexport const {\r\n  useFetchContactsQuery,\r\n  useAddContactMutation,\r\n  useDeleteContactMutation,\r\n  useChangeContactMutation,\r\n} = phonebookApi;\r\n","import { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { authSelectors } from '../../redux/auth/selectors';\r\nimport './Navigation.css';\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <nav className=\"navigation\">\r\n      <NavLink exact to=\"/\" className=\"navigation__logo\">\r\n        <h1>Phonebook</h1>\r\n      </NavLink>\r\n\r\n      <div>\r\n        <NavLink\r\n          exact\r\n          to=\"/\"\r\n          className=\"navigation__name\"\r\n          activeClassName=\"navigation__name--active\"\r\n        >\r\n          Home\r\n        </NavLink>\r\n\r\n        {isLoggedIn && (\r\n          <NavLink\r\n            exact\r\n            to=\"/phonebook\"\r\n            className=\"navigation__name\"\r\n            activeClassName=\"navigation__name--active\"\r\n          >\r\n            Contacts\r\n          </NavLink>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { NavLink } from 'react-router-dom';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        className=\"navigation__name\"\r\n        activeClassName=\"navigation__name--active\"\r\n      >\r\n        Registration\r\n      </NavLink>\r\n\r\n      <NavLink\r\n        to=\"/login\"\r\n        className=\"navigation__name\"\r\n        activeClassName=\"navigation__name--active\"\r\n      >\r\n        Sign in\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport * as authOperations from '../../redux/auth/operations';\r\nimport * as authSelectors from '../../redux/auth/selectors';\r\nimport defaultAvatar from '../../images/defaultAvatar.png';\r\nimport './UserMenu.css';\r\n\r\nexport default function AuthNav() {\r\n  const name = useSelector(authSelectors.getUserName);\r\n  const email = useSelector(authSelectors.getUserEmail);\r\n\r\n  const avatar = defaultAvatar;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"userMenu\">\r\n      <img\r\n        className=\"userMenu__avatar\"\r\n        src={avatar}\r\n        alt=\"avatar\"\r\n        width=\"35\"\r\n      ></img>\r\n      <div className=\"userMenu__content\">\r\n        <span className=\" userMenu__item\">\r\n          Welcome, <span className=\"userMenu__item--accent\">{name}</span>{' '}\r\n        </span>\r\n        <span className=\"userMenu__item\">({email})</span>\r\n        <button\r\n          className=\"userMenu__item userMenu__btn\"\r\n          type=\"button\"\r\n          onClick={() => dispatch(authOperations.logOut())}\r\n        >\r\n          Log Out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,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\"","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport * as authSelectors from '../../redux/auth/selectors';\r\nimport './AppBar.css';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <header className=\"appBar\">\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router';\r\nimport { authSelectors } from '../redux/auth/selectors';\r\n\r\nexport default function PrivateRoute({ children, ...routeProps }) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to=\"/login\" />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router';\r\nimport { authSelectors } from '../redux/auth/selectors';\r\n\r\nexport default function PiblicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import './App.css';\nimport React, { Suspense, useEffect, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Switch, Redirect } from 'react-router';\nimport AppBar from './components/AppBar/AppBar';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport * as authOperations from './redux/auth/operations';\nimport { authSelectors } from './redux/auth/selectors';\n\nconst HomeView = lazy(() => import('./views/HomeView'));\nconst RegisterView = lazy(() => import('./views/RegisterView'));\nconst LoginView = lazy(() => import('./views/LoginView'));\nconst PhonebookView = lazy(() => import('./views/PhonebookView'));\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFethingCurrentUser = useSelector(\n    authSelectors.getIsFetchingCurrentUser\n  );\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <>\n      {!isFethingCurrentUser && (\n        <>\n          <AppBar />\n\n          <Suspense fallback={<h1>Loading...</h1>}>\n            <div className=\"wrapper\">\n              <Switch>\n                <PublicRoute exact path=\"/\">\n                  <HomeView />\n                </PublicRoute>\n\n                <PublicRoute exact path=\"/register\" restricted>\n                  <RegisterView />\n                </PublicRoute>\n\n                <PublicRoute\n                  exact\n                  path=\"/login\"\n                  redirectTo=\"/phonebook\"\n                  restricted\n                >\n                  <LoginView />\n                </PublicRoute>\n\n                <PrivateRoute exact path=\"/phonebook\" redirectTo=\"/login\">\n                  <PhonebookView />\n                </PrivateRoute>\n\n                <Redirect from=\"*\" to=\"/\" />\n              </Switch>\n            </div>\n          </Suspense>\n        </>\n      )}\n    </>\n  );\n}\n","import * as authOperations from './operations';\r\n\r\nconst { createSlice } = require('@reduxjs/toolkit');\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFethingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, { payload }) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFethingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, { payload }) {\r\n      state.user = payload;\r\n      state.isLoggedIn = true;\r\n      state.isFethingCurrentUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFethingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { phonebookApi } from './contacts/contacts-slice';\r\nimport authReducer from './auth/slice';\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nconst middleware = (getDefaultMiddleware) => [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n  phonebookApi.middleware,\r\n];\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    [phonebookApi.reducerPath]: phonebookApi.reducer,\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nconst persistor = persistStore(store);\r\n\r\nexport { store, persistor };\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport * as store from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store.store}>\n      <PersistGate loading={null} persistor={store.persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}